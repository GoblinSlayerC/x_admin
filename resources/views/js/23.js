/** 
 * easyDialog v2.2
 * Url : http://stylechen.com/easydialog-v2.0.html
 * Author : chenmnkken@gmail.com
 * Date : 2012-04-22
 */
(function(f,w){var d=f.document,t=d.documentElement,A=function(){var p=d.body,q=1,u="cache"+(+new Date+"").slice(-8),m={},e=function(){};e.prototype={getOptions:function(a){var b,c={},l={container:null,overlay:!0,drag:!0,fixed:!0,follow:null,followX:0,followY:0,autoClose:0,lock:!1,callback:null};for(b in l)c[b]=a[b]!==w?a[b]:l[b];e.data("options",c);return c},setBodyBg:function(){"fixed"!==p.currentStyle.backgroundAttachment&&(p.style.backgroundImage="url(about:blank)",p.style.backgroundAttachment=
"fixed")},appendIframe:function(a){a.innerHTML='<iframe style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:-1;border:0 none;filter:alpha(opacity=0)"></iframe>'},setPosition:function(a,b){a=a.style;a.position=b?"fixed":"absolute";b?(a.top="30%",a.left="50%"):(a.top=t.clientHeight/2+e.getScroll("top")+"px",a.left=t.clientWidth/2+e.getScroll("left")+"px")},createOverlay:function(){var a=d.createElement("div");a.style.cssText="margin:0;padding:0;border:none;width:100%;height:100%;background:#333;opacity:0.6;filter:alpha(opacity=60);z-index:9999;position:fixed;top:0;left:0;";
a.id="overlay";return a},createDialogBox:function(){var a=d.createElement("div");a.style.cssText="background-color: #ffffff; z-index:10000; width: 570px; height: 410px; margin-left: -285px; margin-top: -150px; border-radius: 5px; color: #535e66;";a.id="easyDialogBox";return a},createDialogWrap:function(a){var b="function"===typeof a.yesFn?'<a class="sgBtn ok" id="easyDialogYesBtn">'+("string"===typeof a.yesText?a.yesText:"\u786e\u5b9a")+"</a>":"",c="function"===typeof a.noFn||!0===a.noFn?'<a class="sgBtn cancel" id="easyDialogNoBtn">'+
("string"===typeof a.noText?a.noText:"\u53d6\u6d88")+"</a>":"";a=[a.header?'<div class="ttBox" id="easyDialogTitle"><a href="javascript:void(0)" target="_self" title="\u5173\u95ed\u7a97\u53e3" class="close_btn" id="closeBtn">&times;</a><span class="tt">'+a.header+"</span></div>":"",'<div class="txtBox">'+a.content+"</div>",""===b&&""===c?"":'<div class="btnArea">'+b+c+"</div>"].join("");b=d.getElementById("easyDialogWrapper");b||(b=d.createElement("div"),b.id="easyDialogWrapper");b.innerHTML=a.replace(/<[\/]*script[\s\S]*?>/ig,
"");return b}};e.data=function(a,b,c){if("string"===typeof a)return b!==w&&(m[a]=b),m[a];if("object"===typeof a)return a=a===f?0:9===a.nodeType?1:a[u]?a[u]:a[u]=++q,a=m[a]?m[a]:m[a]={},c!==w&&(a[b]=c),a[b]};e.removeData=function(a,b){if("string"===typeof a)delete m[a];else if("object"===typeof a){var c=a===f?0:9===a.nodeType?1:a[u];if(c!==w){var e=function(a){for(var b in a)return!1;return!0},d=function(){delete m[c];if(!(1>=c))try{delete a[u]}catch(C){a.removeAttribute(u)}};b?(delete m[c][b],e(m[c])&&
d()):d()}}};e.event={bind:function(a,b,c){var d=e.data(a,"e"+b)||e.data(a,"e"+b,[]);d.push(c);1===d.length&&(c=this.eventHandler(a),e.data(a,b+"Handler",c),a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))},unbind:function(a,b,c){var d=e.data(a,"e"+b);if(d){if(c)for(var h=d.length-1,f=d[h];0<=h;h--)f===c&&d.splice(h,1);else d=w;d&&d.length||(c=e.data(a,b+"Handler"),a.addEventListener?a.removeEventListener(b,c,!1):a.attachEvent&&a.detachEvent("on"+b,c),e.removeData(a,
b+"Handler"),e.removeData(a,"e"+b))}},eventHandler:function(a){return function(b){b=e.event.fixEvent(b||f.event);for(var c=e.data(a,"e"+b.type),d=0,h;h=c[d++];)!1===h.call(a,b)&&(b.preventDefault(),b.stopPropagation())}},fixEvent:function(a){if(a.target)return a;var b={},c;b.target=a.srcElement||document;b.preventDefault=function(){a.returnValue=!1};b.stopPropagation=function(){a.cancelBubble=!0};for(c in a)b[c]=a[c];return b}};e.capitalize=function(a){var b=a.charAt(0);return b.toUpperCase()+a.replace(b,
"")};e.getScroll=function(a){a=this.capitalize(a);return t["scroll"+a]||p["scroll"+a]};e.getOffset=function(a,b){var c=this.capitalize(b);c=t["client"+c]||p["client"+c]||0;var d=this.getScroll(b);a=a.getBoundingClientRect();return Math.round(a[b])+d-c};e.drag=function(a,b){var c="getSelection"in f?function(){f.getSelection().removeAllRanges()}:function(){try{d.selection.empty()}catch(g){}},l=this,h=l.event,p=!1,r="fixed"===b.style.position;e.data("options");h.bind(a,"mousedown",function(a){p=!0;var c=
l.getScroll("top"),g=l.getScroll("left"),f=r?0:g,m=r?0:c;e.data("dragData",{x:a.clientX-l.getOffset(b,"left")+(r?g:0),y:a.clientY-l.getOffset(b,"top")+(r?c:0),el:f,et:m,er:f+t.clientWidth-b.offsetWidth,eb:m+t.clientHeight-b.offsetHeight});h.bind(d,"mousemove",k);h.bind(d,"mouseup",n);a.stopPropagation();a.preventDefault()});var k=function(a){if(p){c();var d=e.data("dragData"),g=a.clientX-d.x,f=a.clientY-d.y,h=d.et,k=d.er,l=d.eb;d=d.el;var n=b.style;n.marginLeft=n.marginTop="0px";n.left=(g<=d?d:g>=
k?k:g)+"px";n.top=(f<=h?h:f>=l?l:f)+"px";a.stopPropagation()}},n=function(a){p=!1;h.unbind(d,"mousemove",k);h.unbind(d,"mouseup",arguments.callee);a.stopPropagation()}};var x,y=function(a){27===a.keyCode&&z.close()},z={open:function(a){var b=new e,c=b.getOptions(a||{});a=e.event;var l=t.clientWidth,h=t.clientHeight,m=this;x&&(clearTimeout(x),x=w);if(c.overlay){var r=d.getElementById("overlay");r||(r=b.createOverlay(),p.appendChild(r));r.style.display="block"}var k=d.getElementById("easyDialogBox");
k||(k=b.createDialogBox(),p.appendChild(k));if(c.follow){var n=function(){b.setFollow(k,c.follow,c.followX,c.followY)};n();a.bind(f,"resize",n);e.data("follow",n);r&&(r.style.display="none");c.fixed=!1}else b.setPosition(k,c.fixed);k.style.display="block";var g="string"===typeof c.container?d.getElementById(c.container):b.createDialogWrap(c.container);n=k.getElementsByTagName("*")[0];n?n&&g!==n&&(n.style.display="none",p.appendChild(n),k.appendChild(g)):k.appendChild(g);g.style.display="block";var q=
g.offsetWidth,v=g.offsetHeight;n=q>l;var u=v>h;g.style.marginTop=g.style.marginRight=g.style.marginBottom=g.style.marginLeft="0px";c.follow?k.style.marginLeft=k.style.marginTop="0px":(k.style.marginLeft="-"+(n?l/2:q/2)+"px",k.style.marginTop="-"+(u?h/2:v/2)+"px");l=d.getElementById("closeBtn");h=d.getElementById("easyDialogTitle");g=d.getElementById("easyDialogYesBtn");q=d.getElementById("easyDialogNoBtn");g&&a.bind(g,"click",function(a){!1!==c.container.yesFn.call(m,a)&&m.close()});q?(v=function(a){!0!==
c.container.noFn&&!1===c.container.noFn.call(m,a)||m.close()},a.bind(q,"click",v),l&&a.bind(l,"click",v)):l&&a.bind(l,"click",m.close);c.lock||a.bind(d,"keyup",y);c.autoClose&&"number"===typeof c.autoClose&&(x=setTimeout(m.close,c.autoClose));c.follow||c.fixed||(v=function(){b.setPosition(k,!1)},n||u||a.bind(f,"resize",v),e.data("resize",v));e.data("dialogElements",{overlay:r,dialogBox:k,closeBtn:l,dialogTitle:h,dialogYesBtn:g,dialogNoBtn:q})},close:function(){var a=e.data("options"),b=e.data("dialogElements"),
c=e.event;x&&(clearTimeout(x),x=w);a.overlay&&b.overlay&&(b.overlay.style.display="none");b.dialogBox.style.display="none";b.closeBtn&&c.unbind(b.closeBtn,"click");b.dialogTitle&&c.unbind(b.dialogTitle,"mousedown");b.dialogYesBtn&&c.unbind(b.dialogYesBtn,"click");b.dialogNoBtn&&c.unbind(b.dialogNoBtn,"click");a.follow||a.fixed||(c.unbind(f,"resize",e.data("resize")),e.removeData("resize"));a.follow&&(c.unbind(f,"resize",e.data("follow")),e.removeData("follow"));a.lock||c.unbind(d,"keyup",y);"function"===
typeof a.callback&&a.callback.call(z);e.removeData("options");e.removeData("dialogElements")}};return z},q=function(){f.easyDialog=A()},y=function(){if(!d.body){try{t.doScroll("left")}catch(p){setTimeout(y,1);return}q()}};(function(){if(d.body)q();else if(d.addEventListener)d.addEventListener("DOMContentLoaded",function(){d.removeEventListener("DOMContentLoaded",arguments.callee,!1);q()},!1),f.addEventListener("load",q,!1);else if(d.attachEvent){d.attachEvent("onreadystatechange",function(){"complete"===
d.readyState&&(d.detachEvent("onreadystatechange",arguments.callee),q())});f.attachEvent("onload",q);var p=!1;try{p=null==f.frameElement}catch(B){}t.doScroll&&p&&y()}})()})(window,void 0);